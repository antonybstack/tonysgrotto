{"ast":null,"code":"import _objectSpread from\"C:\\\\coding\\\\tonysgrotto\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\coding\\\\tonysgrotto\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React from\"react\";import axios from\"axios\";import{useState,useEffect,useContext}from\"react\";import{TicketContext}from\"../contexts/TicketContext\";var EditTicket=function EditTicket(props){var _useContext=useContext(TicketContext),_useContext2=_slicedToArray(_useContext,2),tickets=_useContext2[0],setTickets=_useContext2[1];var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),ticket=_useState2[0],setTicket=_useState2[1];var _useState3=useState(props.value.ticket.ticket.ticket_name),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState(\"backlog\"),_useState6=_slicedToArray(_useState5,2),status=_useState6[0],setStatus=_useState6[1];console.log(props);console.log(tickets);useEffect(function(){axios.get(\"http://localhost:4000/tickets/\"+props.value.ticket.ticket._id).then(function(response){setTicket(response.data);}).catch(function(error){console.log(error);});},[]);var handleChangeName=function handleChangeName(e){setName(e.target.value);console.log({name:name});};var handleChangeStatus=function handleChangeStatus(e){setStatus(e.target.value);console.log({status:status});};var handleSubmit=function handleSubmit(e){e.preventDefault();var newTicket={ticket_name:name,ticket_status:status};axios.post(\"http://localhost:4000/tickets/update/\"+ticket._id,newTicket).then(function(res){console.log(ticket._id);console.log(res.data);tickets.map(function(t,index){if(t._id===ticket._id){var i=index;console.log(i);var newTickets=tickets.slice();newTickets.splice(index,1,_objectSpread({},ticket,{//remove 1 element before 'index' and insert the following)\nticket_name:res.data.ticket.ticket_name,ticket_status:res.data.ticket.ticket_status}));setTickets(newTickets);}});// tickets.map((ticket, index) => {\n//   const i = index;\n//   const newTickets = tickets.slice();\n//   newTickets.splice(index, 1, {\n//     ...ticket, //remove 1 element before 'index' and insert the following)\n//     ticket_name: res.data.ticket.ticket_name,\n//     ticket_status: res.data.ticket.ticket_status,\n//   });\n//   console.log(newTickets);\n//   setTickets(newTickets);\n// });\n});setName(\"\");//empties textbox\nsetStatus(\"\");//empties textbox\n};return/*#__PURE__*/React.createElement(\"div\",{className:\"editForm\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"label\",{for:\"name\"},\"Change Name:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"name\",value:name,onChange:handleChangeName}),/*#__PURE__*/React.createElement(\"label\",{for:\"status\"},\"Change Status:\"),/*#__PURE__*/React.createElement(\"select\",{name:\"status\",value:status,onChange:handleChangeStatus},/*#__PURE__*/React.createElement(\"option\",{selected:true,value:\"backlog\"},\"backlog\"),/*#__PURE__*/React.createElement(\"option\",{value:\"sprint\"},\"sprint\"),/*#__PURE__*/React.createElement(\"option\",{value:\"progress\"},\"progress\"),/*#__PURE__*/React.createElement(\"option\",{value:\"done\"},\"done\")),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",name:\"Submit\",className:\"submit\"})));};export default EditTicket;","map":{"version":3,"sources":["C:/coding/tonysgrotto/src/addData/EditTicket.js"],"names":["React","axios","useState","useEffect","useContext","TicketContext","EditTicket","props","tickets","setTickets","ticket","setTicket","value","ticket_name","name","setName","status","setStatus","console","log","get","_id","then","response","data","catch","error","handleChangeName","e","target","handleChangeStatus","handleSubmit","preventDefault","newTicket","ticket_status","post","res","map","t","index","i","newTickets","slice","splice"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport axios from \"axios\";\r\nimport { useState, useEffect, useContext } from \"react\";\r\nimport { TicketContext } from \"../contexts/TicketContext\";\r\n\r\nconst EditTicket = (props) => {\r\n  const [tickets, setTickets] = useContext(TicketContext);\r\n  const [ticket, setTicket] = useState(\"\");\r\n  const [name, setName] = useState(props.value.ticket.ticket.ticket_name);\r\n  const [status, setStatus] = useState(\"backlog\");\r\n  console.log(props);\r\n  console.log(tickets);\r\n  useEffect(() => {\r\n    axios\r\n      .get(\"http://localhost:4000/tickets/\" + props.value.ticket.ticket._id)\r\n      .then((response) => {\r\n        setTicket(response.data);\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n  }, []);\r\n\r\n  const handleChangeName = (e) => {\r\n    setName(e.target.value);\r\n    console.log({ name });\r\n  };\r\n  const handleChangeStatus = (e) => {\r\n    setStatus(e.target.value);\r\n    console.log({ status });\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const newTicket = {\r\n      ticket_name: name,\r\n      ticket_status: status,\r\n    };\r\n    axios.post(\"http://localhost:4000/tickets/update/\" + ticket._id, newTicket).then((res) => {\r\n      console.log(ticket._id);\r\n      console.log(res.data);\r\n      tickets.map((t, index) => {\r\n        if (t._id === ticket._id) {\r\n          const i = index;\r\n          console.log(i);\r\n          const newTickets = tickets.slice();\r\n          newTickets.splice(index, 1, {\r\n            ...ticket, //remove 1 element before 'index' and insert the following)\r\n            ticket_name: res.data.ticket.ticket_name,\r\n            ticket_status: res.data.ticket.ticket_status,\r\n          });\r\n          setTickets(newTickets);\r\n        }\r\n      });\r\n      // tickets.map((ticket, index) => {\r\n      //   const i = index;\r\n      //   const newTickets = tickets.slice();\r\n      //   newTickets.splice(index, 1, {\r\n      //     ...ticket, //remove 1 element before 'index' and insert the following)\r\n      //     ticket_name: res.data.ticket.ticket_name,\r\n      //     ticket_status: res.data.ticket.ticket_status,\r\n      //   });\r\n      //   console.log(newTickets);\r\n      //   setTickets(newTickets);\r\n      // });\r\n    });\r\n\r\n    setName(\"\"); //empties textbox\r\n    setStatus(\"\"); //empties textbox\r\n  };\r\n\r\n  return (\r\n    <div className=\"editForm\">\r\n      <form onSubmit={handleSubmit}>\r\n        <label for=\"name\">Change Name:</label>\r\n        <input type=\"text\" name=\"name\" value={name} onChange={handleChangeName} />\r\n\r\n        <label for=\"status\">Change Status:</label>\r\n        <select name=\"status\" value={status} onChange={handleChangeStatus}>\r\n          <option selected value=\"backlog\">\r\n            backlog\r\n          </option>\r\n          <option value=\"sprint\">sprint</option>\r\n          <option value=\"progress\">progress</option>\r\n          <option value=\"done\">done</option>\r\n        </select>\r\n\r\n        <input type=\"submit\" name=\"Submit\" className=\"submit\"></input>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\nexport default EditTicket;\r\n"]},"metadata":{},"sourceType":"module"}